{"version":3,"sources":["../../middleware/paginator.js"],"names":["req","res","next","query","page","limit","q","start","stop","search","Number","isNaN"],"mappings":";;;;;;AAAA;;;;;kBAKe,UAACA,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,mBACKF,GADL,CACzBG,KADyB;AAAA,MAChBC,IADgB,cAChBA,IADgB;AAAA,MACVC,KADU,cACVA,KADU;AAAA,MACHC,CADG,cACHA,CADG;;AAEjC,MAAIC,QAAQ,CAAZ;AAAA,MAAeC,OAAO,EAAtB;AAAA,MAA0BC,SAASH,IAAIA,CAAJ,GAAQ,EAA3C;AACA,MAAIF,IAAJ,EAAU;AACRG,YAAQG,OAAON,IAAP,CAAR;AACA,QAAIO,MAAMJ,KAAN,KAAgBA,QAAQ,CAA5B,EAA+B;AAC7BA,cAAQ,CAAR;AACD;AACF;AACD,MAAIF,KAAJ,EAAW;AACTG,WAAOE,OAAOL,KAAP,CAAP;AACA,QAAIM,MAAMH,IAAN,CAAJ,EAAiB;AACfA,aAAO,EAAP;AACD;AACD,QAAIA,OAAO,GAAX,EAAgB;AACdA,aAAO,GAAP;AACD;AACF;AACDD,UAAQ,EAAEA,KAAF,GAAUC,IAAlB;AACAR,MAAIS,MAAJ,GAAaA,MAAb;AACAT,MAAIO,KAAJ,GAAYA,KAAZ;AACAP,MAAIQ,IAAJ,GAAWA,IAAX;AACAN;AACD,C","file":"paginator.js","sourcesContent":["/**\r\n * @fileoverview paginator is a middleware that extracts query parameters for pagination. \r\n * The query is parsed and piped to the next callback.\r\n * @exports paginator\r\n */\r\nexport default (req, res, next) => {\r\n  const { query: { page, limit, q } } = req;\r\n  let start = 1, stop = 20, search = q ? q : '';\r\n  if (page) {\r\n    start = Number(page);\r\n    if (isNaN(start) || start < 1) {\r\n      start = 1;\r\n    }\r\n  }\r\n  if (limit) {\r\n    stop = Number(limit);\r\n    if (isNaN(stop)) {\r\n      stop = 20;\r\n    }\r\n    if (stop > 100) {\r\n      stop = 100;\r\n    }\r\n  }\r\n  start = --start * stop;\r\n  req.search = search;\r\n  req.start = start;\r\n  req.stop = stop;\r\n  next();\r\n};"]}